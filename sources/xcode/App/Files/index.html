<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Hello Jasonelle</title>
        
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        
        <link rel="stylesheet" href="https://unpkg.com/sakura.css/css/sakura.css" type="text/css">
        
        <script type="text/javascript">
            window.traceFromMain = () => $logger.trace("I was called from Main.js!!!");
        </script>
        <script type="text/javascript">
            
            // Test Native Logger
            const log = () => {
              // This call will be shown in Safari Debug Console Only
              console.log("Calling Native Logger from WebView");
              // This call will be shown in XCode Console
              $logger.trace("Calling Native Logger from WebView");
            };
            
            // Test Badge Extension
            // Native extension use $agent.trigger
            // Native extensions can use Promises
            const badge = {};
            badge.set = async (number = 3) => {
                const response = await $agent.trigger("$badge.set", number);
                $logger.trace("Got Response " + response);
            };
            badge.clear = async () => $agent.trigger("$badge.clear");
            
            
            // Actions defined in main.js
            // Test Hello Action
            // JS Actions use $agent.call
            // These actions cannot return a Promise (yet)
            // Define these actions inside the main.js actions
            const hello = (world = "world") => {
              const result = $agent.call("hello", world);
              $logger.trace(result);
            };
            
            // Open app in safari
            const safari = (url) => {
                $agent.call("safari", url);
            };
            
            // Event triggered by MyExtension.js
            document.addEventListener(
              "$myextension.events.example",
              function(e) {
                $logger.trace("Received Example Event: " + e.detail.message);
              }
            );
            
        </script>
    </head>
    <body>
        <img src="AppIcon.png" title="Jasonelle Icon">
        <ul>
            <li><h3 onClick="log()">Test Native Logger</h3></li>
            <li><h3 onClick="badge.set()">Increment App Badge</h3></li>
            <li><h3 onClick="badge.clear()">Clear App Badge</h3></li>
            <li><h3 onClick="hello()">Test Bridge From WebView to JSContext</h3></li>
            <li>
                <h3 onClick="safari('https://google.com')">
                    Test Opening Safari Link
                </h3>
            </li>
            <li>
                <h3 onClick="$keychain.set('number', 3)">Example $keychain.set</h3>
            </li>
            <li>
                <h3 onClick="$keychain.get('number').then(num => alert(num))">Example $keychain.get</h3>
            </li>
            <li>
                <h3 onClick="$keychain.remove('number')">Example $keychain.remove</h3>
            </li>
            <li>
                <h3 onClick="$keychain.clear()">Example $keychain.clear</h3>
            </li>
            
            <!-- Sets the cookie and save it to keychain -->
            <li>
                <h3 onClick="$cookies.Cookies.set('name', 'Ethan'); $cookies.set().then(val => alert(val))">Example $cookies.set</h3>
            </li>
            
            <!-- Gets the current cookie value from keychain -->
            <li>
                <h3 onClick="$cookies.get().then(val => alert(val))">Example $cookies.get</h3>
            </li>
            
            <!-- Reads cookie from keychain and then writes to document.cookie -->
            <li>
                <h3 onClick="$cookies.write().then(val => alert(val))">Example $cookies.write</h3>
            </li>
            
            <!-- Removes cookies from keychain -->
            <li>
                <h3 onClick="$cookies.Cookies.remove('name'); $cookies.remove().then(val => alert(val))">Example $cookies.remove</h3>
            </li>
            <li>
                <h3 onClick="alert('Hello')">Alert Example</h3>
            </li>
            <li>
                <h3 onClick="confirm('Press a button!')">Confirm Example</h3>
            </li>
            <li>
                <h3 onClick="prompt('Please enter your name', 'Ethan G.')">Prompt Example</h3>
            </li>
            <li>
                <h3>Example Image Picker</h3>
                <input
                id="imagePickerFileInput"
                type="file"
                accept="image/*"
              />
            </li>
            
            <li>
                <h3>Example Camera (Will crash in Simulator)</h3>
                <input
                id="cameraFileInput"
                type="file"
                accept="image/*"
                capture="environment"
              />
            </li>
            <li>
                <h3 onClick="$contacts.all().then(info => $logger.trace(JSON.stringify(info)))">Fetch Contacts</h3>
            </li>
            <li>
                <!-- Modify config/dev or config/prod with
                the allowed:["file://", "google.cl"] to load
                this url inside the app -->
                <a href="https://google.cl">
                    <h3>Test Allowed URL (Open Browser)</h3>
                </a>
            </li>
            <li><h3 onClick="$myextension.run()">Test Example Extension</h3></li>
        </ul>
    </body>
</html>
